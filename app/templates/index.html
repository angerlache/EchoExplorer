<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="stylesheet" href="../static/css/mystyle.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <!--script src="{{ url_for('static', filename='js/lib/jquery-2.2.3.min.js') }}" type="text/javascript"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script-->


    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <title>EchoExplorer</title>
    
    <!--link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"-->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

    <!--link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"-->
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
    <!--script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script-->

    

    <script src="{{ url_for('static', filename='js/lib/wavesurfer.min.js') }}" type="text/javascript"></script>
    <script src="{{ url_for('static', filename='js/lib/wavesurfer.spectrogram.min.js') }}" type="text/javascript"></script>
    <script src="{{ url_for('static', filename='js/lib/wavesurfer.regions.js') }}" type="text/javascript"></script>
    <script src="{{ url_for('static', filename='js/lib/wavesurfer.timeline.min.js') }}" type="text/javascript"></script>
    <!--script src="{{ url_for('static', filename='js/lib/wavesurfer.labels.js') }}" type="text/javascript"></script-->

    <script src="{{ url_for('static', filename='js/lib/d3.v5.min.js') }}" type="text/javascript"></script>
    <script src="{{ url_for('static', filename='js/lib/spectrogram.js') }}" type="text/javascript"></script>
    <link href="{{ url_for('static', filename='css/spectrogram.css') }}" media="screen" rel="stylesheet" type="text/css" />

    <!--link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous"-->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css">
    

    <!-- Include jquery and css for data table -->
    <link rel="stylesheet" href="https://cdn.datatables.net/2.0.3/css/dataTables.dataTables.css" />
  
    <script src="https://cdn.datatables.net/2.0.3/js/dataTables.js"></script>

    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
    integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
    crossorigin=""/>
    
     <!-- Make sure you put this AFTER Leaflet's CSS -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
    integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
    crossorigin=""></script>
    
    
</head>
<body>

    <!--button type="button"  onclick="openPopUpWindow()">
        See all species
    </button-->

    <!-- JavaScript function to open the pop-up window -->
    <script>function openPopUpWindow(page) {
                // Specify the properties of the pop-up window
                var popUpProperties = "width=800,height=600,scrollbars=yes,resizable=yes";

                if (page === 'species'){window.open("{{ url_for('species') }}", "Species Window", popUpProperties);}
                else if (page === 'tips') {window.open("{{ url_for('tips') }}", "Tips Window", popUpProperties);}
            }</script>


    <nav class="navbar navbar-dark bg-dark">
    <a class="navbar-brand" href="#"> EchoExplorer </a> <!-- Or other application name -->
    <a class="navbar-brand" href="#" onclick="openPopUpWindow('species')">Species description</a>
    <!--a class="navbar-brand" href="{{url_for('species')}}" onclick="openPopUpWindow()">See all species</a-->
    <a class="navbar-brand" href="{{url_for('login_register')}}">Sign in/up</a>
    {% if is_logged_in %}
        <!-- Show the button only if the user is logged in -->
        <a class="navbar-brand" href="{{url_for('dashboard')}}">Logout Page</a>
        
    {% endif %}
    <!--a class="navbar-brand" href="{{url_for('split')}}" aria-disabled="true">Split Audio</a-->
    <a class="navbar-brand" href="#" onclick="openPopUpWindow('tips')">Usage Tips</a>
    <a class="navbar-brand" href="{{url_for('about')}}">About Us</a>
    <br>
    </nav>
    


    

    <div class="btn-group">

        <div class="btn-group">
            <button type="button" class="btn dropdown-toggle" data-bs-toggle="dropdown" style="font-size: 0.8rem;">File</button>
            <div class="dropdown-menu">
                <button type="button" class="dropdown-item" style="padding: 0rem;">
                    <label class="btn" title="only wav files are supported" for="audioFile" style="text-align: left; width: 100%; font-size: 0.8rem;">Open</label>
                    <input type="file" id="audioFile" accept=".wav" style="display: none;">
                </button>
                <button type="button" class="dropdown-item" style="padding: 0rem;">
                    <label class="btn" for="multipleAudioFile" style="text-align: left; width: 100%; font-size: 0.8rem;">Open multiple</label>
                    <input type="file" id="multipleAudioFile" accept=".wav" multiple style="display: none;">
                </button>
                <button type="button" id="myAudios" class="btn" data-bs-toggle="modal" data-bs-target="#modalAudios" style="text-align: left; width: 100%; font-size: 0.8rem;">
                    My audios
                </button>
                <button type="button" id="allAudios" class="btn" data-bs-toggle="modal" data-bs-target="#modalAudios" style="text-align: left; width: 100%; font-size: 0.8rem;">
                    All audios
                </button>
                <button type="button" id="newObservation" class="btn" data-bs-toggle="modal" data-bs-target="#modalNewObservation" style="text-align: left; width: 100%; font-size: 0.8rem;">
                    New observation
                </button>
            </div>
        </div>
        

        <div class="btn-group">
            <button type="button" id="zoomButton" class="btn dropdown-toggle" data-bs-toggle="dropdown" style="font-size: 0.8rem;">Zoom</button>
            <div class="dropdown-menu">
                <button type="button" id="zoomIn" class="btn dropdown-item" style="font-size: 0.8rem;">Zoom in</button>
                <button type="button" id="zoomOut" class="btn dropdown-item" style="font-size: 0.8rem;">Zoom out</button>
                
                <select id="chunkLengthSelector" class="custom-select" style="text-align: left; width: 100%; font-size: 0.8rem;">
                    <option value="5">5s</option>
                    <option value="10">10s</option>
                    <option value="20">20s</option>
                    <option value="30">30s</option>
                    <option value="60">60s</option>
                </select>
            </div>
        </div>

        <div class="btn-group" id="AIbuttons">
            <button type="button" id="startAI" class="btn dropdown-toggle" data-bs-toggle="dropdown" style="font-size: 0.8rem;" {% if not is_logged_in %} disabled {% endif %}>
                <span id="spinner" class="spinner-border spinner-border-sm" role="status" aria-hidden="true" style="display: none; font-size: 0.8rem;"></span>
                Process
            </button>
            <div class="dropdown-menu">
                <button type="button" title="AI for bats" id="processButton" class="btn dropdown-item" style="font-size: 0.8rem;">BatML</button>
                <button type="button" title="AI for birds" id="processButton2" class="btn dropdown-item" style="font-size: 0.8rem;">BirdNET</button>
                <button type="button" title="AI for bats" id="processButton3" class="btn dropdown-item" style="font-size: 0.8rem;">BattyBirdNET</button>
                <button type="button" title="AI for bats" id="processButton4" class="btn dropdown-item" style="font-size: 0.8rem;">batdetect2</button>
                <button type="button" title="AI for bats" id="processButton5" class="btn dropdown-item" style="font-size: 0.8rem;">AIVoting</button>
            </div>
        </div>


        <div class="btn-group">
            <button type="button" id="optionsButton" class="btn dropdown-toggle" data-bs-auto-close="false" data-bs-toggle="dropdown" style="font-size: 0.8rem;">Options</button>
            <div class="dropdown-menu" style="width: auto;">
                <label style="font-size: 0.8rem;">
                    Max Freq: <input type="range" id="maxFreq" min="4000" max="192000" value="96000"  oninput="this.nextElementSibling.value = this.value + 'Hz'" /> <output id="freqout"> 96000 Hz</output>
                </label>
                <div class="dropdown-divider"></div>
                <label style="font-size: 0.8rem;">ColorMap Editor:</label>
                <div>
                    <label for="red-slider" style="font-size: 0.8rem; margin-right: 13px;">Red:</label>
                    <input type="range" id="red-slider" name="red" min="-1" max="1" step="0.01" value="0" oninput="this.nextElementSibling.value = this.value"> <output id="redout">0</output>
                </div>

                <div>
                    <label for="green-slider" style="font-size: 0.8rem;">Green:</label>
                    <input type="range" id="green-slider" name="green" min="-1" max="1" step="0.01" value="0.66" oninput="this.nextElementSibling.value = this.value"> <output id="greenout">0.66</output>
                </div>

                <div>
                    <label for="blue-slider" style="font-size: 0.8rem; margin-right: 9px;">Blue:</label>
                    <input type="range" id="blue-slider" name="blue" min="-1" max="1" step="0.01" value="-0.66" oninput="this.nextElementSibling.value = this.value"> <output id="blueout">-0.66</output>
                </div>

                <div>
                    <label for="alpha-slider" style="font-size: 0.8rem;">Alpha:</label>
                    <input type="range" id="alpha-slider" name="alpha" min="0" max="1" step="0.01" value="1" oninput="this.nextElementSibling.value = this.value"> <output id="alphaout">1</output>
                </div>

                <button type="button" title="AI for bats" id="baseColorMap" class="btn dropdown-item" style="font-size: 0.8rem;">BaseColorMap</button>
                <button type="button" title="AI for bats" id="bwColorMap" class="btn dropdown-item" style="font-size: 0.8rem;">Black and White</button>
                <div class="dropdown-divider"></div>
                <label id="proba-container" style="font-size: 0.8rem;">
                    Classification proba: <input type="range" id="proba-slider" min="0" max="100" value="50"  oninput="this.nextElementSibling.value = this.value + ' %'" /> <output id="probaout">50 %</output>
                </label> 
                <label style="font-size: 0.8rem;"> <input type="checkbox" id="saveAfterAI" checked> Save after AI </label>
                <label style="font-size: 0.8rem;"> <input type="checkbox" id="audioVisible"> I share my audios</label>
            </div>
        </div>

        <!--div class="btn-group">
            <button type="button" title="check the species you want to display" id="speciesButton" class="btn dropdown-toggle" aria-expanded="false" data-bs-toggle="dropdown" style="font-size: 0.8rem;">Species</button>
            <ul class="dropdown-menu" id="speciesBoxes" aria-labelledby="dropdownCheckSpecies">
                <if we want the name of specy not clickable> 
                <li style="font-size: 0.8rem;"> <label> <input type="checkbox" value="Barbarg" checked>  </label> Barbarg </li> 
                <li> <label style="font-size: 0.8rem;"> <input type="checkbox" value="Barbarg" checked> Barbarg </label> </li> 
                <li> <label style="font-size: 0.8rem;"> <input type="checkbox" value="Envsp" checked> Envsp </label> </li> 
                <li> <label style="font-size: 0.8rem;"> <input type="checkbox" value="Myosp" checked> Myosp </label> </li>
                <li> <label style="font-size: 0.8rem;"> <input type="checkbox" value="Pip35" checked> Pip35 </label> </li> 
                <li> <label style="font-size: 0.8rem;"> <input type="checkbox" value="Pip50" checked> Pip50 </label> </li> 
                <li> <label style="font-size: 0.8rem;"> <input type="checkbox" value="Plesp" checked> Plesp </label> </li> 
                <li> <label style="font-size: 0.8rem;"> <input type="checkbox" value="Rhisp" checked> Rhisp </label> </li> 
                <li> <label title="for birds/bats full names and custom names"  style="font-size: 0.8rem;"> <input type="checkbox" value="other" checked> Others </label> </li> 
                <li> <label title="unannotated regions" style="font-size: 0.8rem;"> <input type="checkbox" value="Region" checked> Region </label> </li> 
                <button type="button" style="text-align: left; width: 100%; font-size: 0.8rem;" class="btn" id="applySpecies">Apply</button>
            </ul> 
        </div-->

        <div class="btn-group">
            <button type="button" id="speciesButton" title="check the species you want to display" class="btn dropdown-toggle" aria-expanded="false" data-bs-auto-close="false" data-bs-toggle="dropdown" style="font-size: 0.8rem;">Species</button>
                
            <ul class="dropdown-menu" id="speciesBoxes" style="width: auto;"aria-labelledby="dropdownCheckSpecies">
                <li>
                    <input type="checkbox" id="option1" value="Envsp" checked><label style="font-size: 0.8rem;" for="option1"> Envsp</label>
                    <button class='btn btn-sm' id="showSubOptions1" style='padding: 0; width: 20px; height: 20px; font-size: 10px;'><i class='fa fa-angle-double-right'></i></button>
                    <ul class="subOptions1" id="subOptions1" class="dropdown-menu" style="display: none;">
                        <li><label style="font-size: 0.8rem;"><input type="checkbox" class="subOption1" value="Eptesicus nilssonii" checked> Eptesicus nilssonii</label></li>
                        <li><label style="font-size: 0.8rem;"><input type="checkbox" class="subOption1" value="Eptesicus serotinus" checked> Eptesicus serotinus</label></li>
                        <li><label style="font-size: 0.8rem;"><input type="checkbox" class="subOption1" value="Nyctalus lasiopterus" checked> Nyctalus lasiopterus</label></li>
                        <li><label style="font-size: 0.8rem;"><input type="checkbox" class="subOption1" value="Nyctalus leisleri" checked> Nyctalus leisleri</label></li>
                        <li><label style="font-size: 0.8rem;"><input type="checkbox" class="subOption1" value="Nyctalus noctula" checked> Nyctalus noctula</label></li>
                        <li><label style="font-size: 0.8rem;"><input type="checkbox" class="subOption1" value="Vespertilio murinus" checked> Vespertilio murinus</label></li>
                    </ul>
                </li>
                <li>
                    <input type="checkbox" id="option2" value="Plesp" checked><label style="font-size: 0.8rem;" for="option2"> Plesp</label>
                    <button class='btn btn-sm' id="showSubOptions2" style='padding: 0; width: 20px; height: 20px; font-size: 10px;'><i class='fa fa-angle-double-right'></i></button>
                    <ul class="subOptions2" class="dropdown-menu" style="display: none;">
                        <li><label style="font-size: 0.8rem;"><input type="checkbox" class="subOption2" value="Plecotus auritus" checked> Plecotus auritus</label></li>
                        <li><label style="font-size: 0.8rem;"><input type="checkbox" class="subOption2" value="Plecotus austriacus" checked> Plecotus austriacus</label></li>
                    </ul>
                </li>
                <li>
                    <input type="checkbox" id="option3" value="Barbarg" checked><label style="font-size: 0.8rem;" for="option3"> Barbarg</label>
                    <button class='btn btn-sm' id="showSubOptions3" style='padding: 0; width: 20px; height: 20px; font-size: 10px;'><i class='fa fa-angle-double-right'></i></button>
                    <ul class="subOptions3" class="dropdown-menu" style="display: none;">
                        <li><label style="font-size: 0.8rem;"><input type="checkbox" class="subOption3" value="Barbastella barbastellus" checked> Barbastella barbastellus</label></li>
                    </ul>
                </li>
                <li>
                    <input type="checkbox" id="option4" value="Myosp" checked><label style="font-size: 0.8rem;" for="option4"> Myosp</label>
                    <button class='btn btn-sm' id="showSubOptions4" style='padding: 0; width: 20px; height: 20px; font-size: 10px;'><i class='fa fa-angle-double-right'></i></button>
                    <ul class="subOptions4" class="dropdown-menu" style="display: none;">
                        <li><label style="font-size: 0.8rem;"><input type="checkbox" class="subOption4" value="Myotis alcathoe" checked> Myotis alcathoe</label></li>
                        <li><label style="font-size: 0.8rem;"><input type="checkbox" class="subOption4" value="Myotis bechsteinii" checked> Myotis bechsteinii</label></li>
                        <li><label style="font-size: 0.8rem;"><input type="checkbox" class="subOption4" value="Myotis brandtii" checked> Myotis brandtii</label></li>
                        <li><label style="font-size: 0.8rem;"><input type="checkbox" class="subOption4" value="Myotis capaccinii" checked> Myotis capaccinii</label></li>
                        <li><label style="font-size: 0.8rem;"><input type="checkbox" class="subOption4" value="Myotis dasycneme" checked> Myotis dasycneme</label></li>
                        <li><label style="font-size: 0.8rem;"><input type="checkbox" class="subOption4" value="Myotis daubentonii" checked> Myotis daubentonii</label></li>
                        <li><label style="font-size: 0.8rem;"><input type="checkbox" class="subOption4" value="Myotis emarginatus" checked> Myotis emarginatus</label></li>
                        <li><label style="font-size: 0.8rem;"><input type="checkbox" class="subOption4" value="Myotis myotis" checked> Myotis myotis</label></li>
                        <li><label style="font-size: 0.8rem;"><input type="checkbox" class="subOption4" value="Myotis mystacinus" checked> Myotis mystacinus</label></li>
                        <li><label style="font-size: 0.8rem;"><input type="checkbox" class="subOption4" value="Myotis nattereri" checked> Myotis nattereri</label></li>
                    </ul>
                </li>
                <li>
                    <input type="checkbox" id="option5" value="Pip35" checked><label style="font-size: 0.8rem;" for="option5"> Pip35</label>
                    <button class='btn btn-sm' id="showSubOptions5" style='padding: 0; width: 20px; height: 20px; font-size: 10px;'><i class='fa fa-angle-double-right'></i></button>
                    <ul class="subOptions5" class="dropdown-menu" style="display: none;">
                        <li><label style="font-size: 0.8rem;"><input type="checkbox" class="subOption5" value="Pipistrellus kuhlii" checked> Pipistrellus kuhlii</label></li>
                        <li><label style="font-size: 0.8rem;"><input type="checkbox" class="subOption5" value="Pipistrellus nathusii" checked> Pipistrellus nathusii</label></li>
                    </ul>
                </li>
                <li>
                    <input type="checkbox" id="option6" value="Pip50" checked><label style="font-size: 0.8rem;" for="option6"> Pip50</label>
                    <button class='btn btn-sm' id="showSubOptions6" style='padding: 0; width: 20px; height: 20px; font-size: 10px;'><i class='fa fa-angle-double-right'></i></button>
                    <ul class="subOptions6" class="dropdown-menu" style="display: none;">
                        <li><label style="font-size: 0.8rem;"><input type="checkbox" class="subOption5" value="Pipistrellus pipistrellus" checked> Pipistrellus pipistrellus</label></li>
                        <li><label style="font-size: 0.8rem;"><input type="checkbox" class="subOption5" value="Pipistrellus pygmaeus" checked> Pipistrellus pygmaeus</label></li>
                        <li><label style="font-size: 0.8rem;"><input type="checkbox" class="subOption5" value="Pipistrellus maderensis" checked> Pipistrellus maderensis</label></li>
                    </ul>
                </li>
                <li>
                    <input type="checkbox" id="option7" value="Rhisp" checked><label style="font-size: 0.8rem;" for="option7"> Rhisp</label>
                    <button class='btn btn-sm' id="showSubOptions7" style='padding: 0; width: 20px; height: 20px; font-size: 10px;'><i class='fa fa-angle-double-right'></i></button>
                    <ul class="subOptions7" class="dropdown-menu" style="display: none;">
                        <li><label style="font-size: 0.8rem;"><input type="checkbox" class="subOption5" value="Rhinolophus blasii" checked> Rhinolophus blasii</label></li>
                        <li><label style="font-size: 0.8rem;"><input type="checkbox" class="subOption5" value="Rhinolophus ferrumequinum" checked> Rhinolophus ferrumequinum</label></li>
                        <li><label style="font-size: 0.8rem;"><input type="checkbox" class="subOption5" value="Rhinolophus hipposideros" checked> Rhinolophus hipposideros</label></li>
                    </ul>
                </li>
                <li>
                    <input type="checkbox" id="option8" value="Region" checked><label style="font-size: 0.8rem;" for="option8"> Region</label>
                </li>
                <li>
                    <input type="checkbox" id="option9" value="other" checked><label style="font-size: 0.8rem;" for="option9"> Birds</label>
                </li>
                <button type="button" style="text-align: left; width: 100%; font-size: 0.8rem;" class="btn" id="applySpecies">Apply</button>

            </ul>

        </div>

        <div class="btn-group">
            <button type="button" title="check the AI's you want to show the results" id="aiButton" class="btn dropdown-toggle" data-bs-auto-close="false"aria-expanded="false" data-bs-toggle="dropdown" style="font-size: 0.8rem;">AI</button>
            <ul class="dropdown-menu" id="aiBoxes" aria-labelledby="dropdownCheckAI"> 
                <li> <label style="font-size: 0.8rem;"> <input type="checkbox" value="Human" checked> Human </label> </li> 
                <li> <label style="font-size: 0.8rem;"> <input type="checkbox" value="BatML" checked> BatML </label> </li> 
                <li> <label style="font-size: 0.8rem;"> <input type="checkbox" value="BirdNET" checked> BirdNET </label> </li> 
                <li> <label style="font-size: 0.8rem;"> <input type="checkbox" value="BattyBirdNET" checked> BattyBirdNET </label> </li>
                <li> <label style="font-size: 0.8rem;"> <input type="checkbox" value="batdetect2" checked> batdetect2 </label> </li>
                <li> <label style="font-size: 0.8rem;"> <input type="checkbox" value="AIVoting" checked> AIVoting </label> </li>
                <button type="button" style="text-align: left; width: 100%; font-size: 0.8rem;" class="btn" id="applyAI">Apply</button>
            </ul> 
        </div>

        <div class="btn-group">
            <button type="button" id="annotationsButton" title="click+drag to create a region&#013;click to annotate&#013;'shift'+click to play&#013;'Ctrl'+click to delete" class="btn dropdown-toggle" data-bs-toggle="dropdown" style="font-size: 0.8rem;">Annotations</button>
            <div class="dropdown-menu">
                <button class="dropdown-item" id="loadLabels" disabled style="font-size: 0.8rem;">Load Local</button>
                <button class="dropdown-item" id="csv" disabled style="font-size: 0.8rem;">Download csv</button>
                <button class="dropdown-item" id="save" disabled style="font-size: 0.8rem;">Save Local</button>
                <button class="dropdown-item" id="uploadButton" style="font-size: 0.8rem;">Share it</button>
                <!--button class="dropdown-item" id="discussButton" {% if not isExpert %}style="display: none;"{% endif %}>Discussed</button-->
                {% if isExpert %}
                    <button class="dropdown-item" id="validateButton" style="font-size: 0.8rem;">Validate</button>
                {% else %}
                    <button class="dropdown-item" id="validateButton" style="display: none; font-size: 0.8rem;">Validate</button>
                {% endif %}
                
            </div>
        </div>      
        
    </div>

    <br>
    <span id="spinner2" class="spinner-border spinner-border-sm" role="status" aria-hidden="true" style="display: none; font-size: 0.8rem;"></span>
            
    <input type="file" id="audioFile" accept=".wav" style="display: none;">
    <button id="visualizeButton" style="display: none;">Visualize Audio</button>

    <input type="hidden" id="csrf_token" value="{{ csrf_token() }}">


    <br>

    <div class="container mt-3">
        <div class="alert alert-info" id="tooltip" style="display: none;">
          <strong>Info!</strong> You must be logged in.
        </div>
    </div>

    <div id="waveform"></div>
    <div id="wave-timeline"></div>


    <button id="playButton" disabled> <i class="bi bi-play-fill"></i>/<i class="bi bi-pause-fill"></i> </i></button>

    <button id="prec" title="move backward in the audio"> <i class="bi bi-skip-backward-fill"></i> </button>

    <button id="next" title="move forward in the audio"> <i class="bi bi-skip-forward-fill"></i> </button>


    <label id="slider-container">
        Timestep: <input type="range" id="slider" min="0" max="300" value="0"  oninput="this.nextElementSibling.value = this.value + '/' + this.max + ' seconds'" /> <output id="secout"></output>
    </label>

    
    <!-- The Modal -->
    <div class="modal" id="modalAudios">
        <div class="modal-dialog modal-fullscreen">
        <div class="modal-content">
            <div class="modal-body">
                <div class="row">
                    <div class="col-md-auto"class="dropdown" id="taxDiv">
                        <button class="btn btn-light dropdown-toggle" type="button" id="taxonomyButton" data-bs-auto-close="outside" data-bs-toggle="dropdown" aria-expanded="false">
                            Select Species
                        </button>
                    </div>

                    <div class="col-md-auto">
                        <button class="btn btn-light" type="button" id="resetSearch">
                            Apply
                        </button>
                    </div>
                    <div class="col-sm"></div>
                    <div class="col-md-auto">
                            <input type="text" id="autoSearch" class="form-control" placeholder="Search species..">
                            <div class="position-absolute invisible" id="autoSearchComplete"></div>
                    </div>         
                    <div class="col-md-auto">
                        <button type="button" id="autoSearchButton"class="btn btn-outline-primary"><i class="bi bi-search"></i></button>
                    </div>

                    <div class="form-check form-switch">
                        <input class="form-check-input" type="checkbox" id="validatedFilesSwitch">
                        <label class="form-check-label" for="validatedFilesSwitch">Validated files</label>
                    </div>

                    <div class="form-check form-switch">
                        <input class="form-check-input" type="checkbox" id="myFilesSwitch">
                        <label class="form-check-label" for="myFilesSwitch">My files</label>
                    </div>
                    <select id="radiusSearchSelector" class="custom-select" style="text-align: left; width: 10%; font-size: 0.8rem;">
                        <option value="5000">5km</option>
                        <option value="10000">10km</option>
                        <option value="20000">20km</option>
                        <option value="50000">50km</option>
                        <option value="100000">100km</option>
                    </select>
                </div>
                  

                <br>
                <br>
                <br>
                

                <table id="FilesTable" class="display" style="width:100%;">
                    <thead>
                        <tr>
                            <th>Hash</th>
                            <th>Filename</th>
                            <th>Posted by</th>
                            <th>Duration[s]</th>
                            <th>Validated by</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                    </tbody>
                </table>
                <div id="mapFiles" style="height: 360px;"></div>

            </div>
    
            <div class="modal-footer">
                <button type="button" id="closeModalAudios" class="btn btn-danger" data-bs-dismiss="modal">Close</button>
            </div>
    
        </div>
        </div>
    </div>
    
    

    <div class="modal" id="modalNewObservation">
        <div class="modal-dialog modal-fullscreen">
        <div class="modal-content">
    
            <div class="modal-body">
                <button type="button" class="dropdown-item" style="padding: 0rem;">
                    <label class="btn" title="only wav files are supported" for="audioFile" style="text-align: left; width: 100%; font-size: 0.8rem;">Open</label>
                    <input type="file" id="audioFile" accept=".wav" style="display: none;">
                </button>
                <div id="map" style="height: 360px;"></div>
            </div>
    
            <div class="modal-footer">
                <button type="button" id="closeModalNewObservation" class="btn btn-danger" data-bs-dismiss="modal">Close</button>
            </div>
    
        </div>
        </div>
    </div>

    <div id="spectrogram"></div>

    <form role="form" id="myForm" style="display: none;" name="edit" style="opacity: 0; transition: opacity 300ms linear; margin: 30px 0;">
        
        <div>
            <select class="custom-select" id="choiceSelector" name="choiceSelector" style="height: 30px;width: 20%">
                <option value="other" id="customOption">Custom name (type your own...)</option>
                <optgroup label="Barbarg">
                    <option value="Barbarg">Barbarg</option>
                    <option value="Barbastella barbastellus">Barbastella barbastellus</option>
                </optgroup>
                <optgroup label="Envsp">
                    <option value="Envsp">Envsp</option>
                    <option value="Eptesicus nilssonii">Eptesicus nilssonii</option>
                    <option value="Eptesicus serotinus">Eptesicus serotinus</option>
                    <option value="Nyctalus lasiopterus">Nyctalus lasiopterus</option>
                    <option value="Nyctalus leisleri">Nyctalus leisleri</option>
                    <option value="Nyctalus noctula">Nyctalus noctula</option>
                    <option value="Vespertilio murinus">Vespertilio murinus</option>
                </optgroup>
                <optgroup label="Myosp">
                    <option value="Myosp">Myosp</option>
                    <option value="Myotis alcathoe">Myotis alcathoe</option>
                    <option value="Myotis bechsteinii">Myotis bechsteinii</option>
                    <option value="Myotis brandtii">Myotis brandtii</option>
                    <option value="Myotis capaccinii">Myotis capaccinii</option>
                    <option value="Myotis dasycneme">Myotis dasycneme</option>
                    <option value="Myotis daubentonii">Myotis daubentonii</option>
                    <option value="Myotis emarginatus">Myotis emarginatus</option>
                    <option value="Myotis myotis">Myotis myotis</option>
                    <option value="Myotis mystacinus">Myotis mystacinus</option>
                    <option value="Myotis nattereri">Myotis nattereri</option>    
                </optgroup>
                <optgroup label="Pip35">
                    <option value="Pip35">Pip35</option>
                    <option value="Pipistrellus kuhlii">Pipistrellus kuhlii</option>
                    <option value="Pipistrellus nathusii">Pipistrellus nathusii</option>
                </optgroup>
                <optgroup label="Pip50">
                    <option value="Pip50">Pip50</option>
                    <option value="Pipistrellus maderensis">Pipistrellus maderensis</option>
                    <option value="Pipistrellus pipistrellus">Pipistrellus pipistrellus</option>
                    <option value="Pipistrellus pygmaeus">Pipistrellus pygmaeus</option>
                </optgroup>
                <optgroup label="Rhisp">
                    <option value="Rhisp">Rhisp</option>
                    <option value="Rhinolophus blasii">Rhinolophus blasii</option>
                    <option value="Rhinolophus ferrumequinum">Rhinolophus ferrumequinum</option>
                    <option value="Rhinolophus hipposideros">Rhinolophus hipposideros</option>    
                </optgroup>
                <optgroup label="Plesp">
                    <option value="Plesp">Plesp</option>
                    <option value="Plecotus auritus">Plecotus auritus</option>
                    <option value="Plecotus austriacus">Plecotus austriacus</option>
                </optgroup>
                
            </select>
        </div>

        <div class="form-group">
            <label for="note">Note</label>
            <textarea id="note" class="form-control" rows="3" name="note" style="width: 20%;"></textarea>
        </div>
        

        <div>
            <button type="submit" class="btn btn-success btn-block">Save</button>
            <button type="button" class="btn btn-secondary btn-block" id="closeForm">Close</button>
        </div>

    </form>


 

    <table id="myTable", class="display" style="width:100%">
        <thead>
            <tr>
                <th>Species</th>
                <th>Time</th>
                <th>Probability</th>
                <th>AI</th>
                <th>Id</th>
                <th>Action</th>
            </tr>
        </thead>
        <tbody>
        </tbody>
    </table>
    
    
       

    <script>
        var userName = "{{ username }}";
        var isLoggedIn = "{{ is_logged_in }}"
        var isExpert = "{{ isExpert }}"
        var audioVisible = "{{ audio_visible }}"
    </script>

    <script src="{{ url_for('static', filename='js/src/main.js') }}" type="module"></script>

    <script src="{{ url_for('static', filename='js/lib/autocomplete.js') }}"></script>
    <script>
        const autocomplete_example1 = ["Envsp"];
        set_autocomplete('autoSearch', 'autoSearchComplete', autocomplete_example1, start_at_letters=1, count_results=2);
    </script>
    




</body>
</html>
