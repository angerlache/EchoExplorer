<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">


    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <title>WAV File Processor</title>



    <!-- Add your CSS and JavaScript references here -->
    <!--script src="https://unpkg.com/wavesurfer.js@7.7.2/dist/wavesurfer.min.js"></script-->
    <!--script src="https://unpkg.com/wavesurfer.js@7.7.2/dist/plugins/regions.min.js"></script-->
    <!--script src="https://unpkg.com/wavesurfer.js@7.7.2/dist/plugins/zoom.min.js"></script-->
    <!--script src="https://unpkg.com/wavesurfer.js@7.7.2/dist/plugins/spectrogram.min.js"></script-->

    <script src="{{ url_for('static', filename='js/lib/jquery-2.2.3.min.js') }}" type="text/javascript"></script>
    <script src="{{ url_for('static', filename='js/lib/wavesurfer.min.js') }}" type="text/javascript"></script>
    <script src="{{ url_for('static', filename='js/lib/wavesurfer.spectrogram.min.js') }}" type="text/javascript"></script>
    <script src="{{ url_for('static', filename='js/lib/wavesurfer.regions.js') }}" type="text/javascript"></script>
    <!--script src="{{ url_for('static', filename='js/lib/wavesurfer.labels.js') }}" type="text/javascript"></script-->

    <script src="{{ url_for('static', filename='js/lib/d3.v5.min.js') }}" type="text/javascript"></script>
    <script src="{{ url_for('static', filename='js/lib/spectrogram.js') }}" type="text/javascript"></script>
    <link href="{{ url_for('static', filename='css/spectrogram.css') }}" media="screen" rel="stylesheet" type="text/css" />

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css">
    

</head>
<body>

    <nav class="navbar navbar-dark bg-dark">
    <a class="navbar-brand" href="#"> CritterCalls </a> <!-- Or other application name -->
    <a class="navbar-brand" href="{{url_for('species')}}">See all species</a>
    <a class="navbar-brand" href="{{url_for('login')}}">Login Page</a>
    <a class="navbar-brand" href="{{url_for('register')}}">Register Page</a>
    {% if session['is_logged_in'] %}
        <!-- Show the button only if the user is logged in -->
        <a class="navbar-brand" href="{{url_for('dashboard')}}">Logout Page</a>
        <a class="navbar-brand" href="{{url_for('allAudios')}}">All Audio Page</a>
    {% endif %}
    <br>
    </nav>
    


    

    <input type="file" id="audioFile"  accept=".wav">   <!--only accepts .wav -->

    <button id="visualizeButton"  type="button" class="btn btn-primary">Visualize Audio</button>
    <button id="processButton"  type="button" class="btn btn-primary">Process Audio</button>

    <div id="waveform"></div>

    <button id="playButton" > <i class="bi bi-play-fill"></i>/<i class="bi bi-pause-fill"></i> </i></button>

    <button id="prec"> <i class="bi bi-skip-backward-fill"></i> </button>

    <button id="next"> <i class="bi bi-skip-forward-fill"></i> </button>

    <label id="slider-container">
        Timestep: <input type="range" id="slider" min="1" max="300" value="1"  oninput="this.nextElementSibling.value = this.value + ' seconds'" /> <output id="secout">0 seconds</output>
        
    </label>

    

    {% if session['is_logged_in'] %}
        <!-- Show the button only if the user is logged in -->
        <button id="save">Save Labels</button>
        <button id="loadLabels">Load Labels</button>
        {% if isExpert %}

        {% endif %}
    {% else %}
        <!-- Show a hidden button if the user is not logged in -->
        <button id="save" style="display: none;">Save Labels</button>
        <button id="loadLabels" style="display: none;">Load Labels</button>
    {% endif %}
    

    




    <div id="spectrogram"></div>
    <!--<div id="spectrovis" class="spectrogram"></div>-->

    <label>
        Max Freq: <input type="range" id="maxFreq" min="1000" max="96000" value="96000"  oninput="this.nextElementSibling.value = this.value + 'KHz'" /> <output id="freqout"> 96000 KHz</output>
    </label>


    <form role="form" name="edit" style="opacity: 0; transition: opacity 300ms linear; margin: 30px 0;">
        
        <div>
            <select class="custom-select" id="choiceSelector" name="choiceSelector" style="height: 30px;width: 100%">
                <option value="Barbarg">Barbarg</option>
                <option value="Envsp">Envsp</option>
                <option value="Myosp">Myosp</option>
                <option value="Pip35">Pip35</option>
                <option value="Pip50">Pip50</option>
                <option value="Plesp">Plesp</option>
                <option value="Rhisp">Rhisp</option>
            </select>
        </div>

        <div class="form-group">
            <label for="note">Note</label>
            <textarea id="note" class="form-control" rows="3" name="note"></textarea>
        </div>
        

        <div>
            <button type="submit" class="btn btn-success btn-block">Save</button>

            {% if session['is_logged_in'] %}
                {% if isExpert %}
                    <!--button type="button" id="submitLabels" class="btn btn-primary btn-block">Submit Label</button-->
                {% endif %}
            {% endif %}
            <!--button type="button" id="submitLabels" style="display: none;" class="btn btn-primary btn-block">Submit Label</button-->

        </div>

    </form>
        <div class="dropdown"> <button class="btn btn-primary dropdown-toggle" type="button" id="dropdownCheckSpecies" data-bs-toggle="dropdown" aria-expanded="false"> Select  </button> 
            <ul class="dropdown-menu" aria-labelledby="multiSelectDropdown"> 
                <li> <label> <input type="checkbox" value="Barbarg" checked> Barbarg </label> </li> 
                <li> <label> <input type="checkbox" value="Envsp" checked> Envsp </label> </li> 
                <li> <label> <input type="checkbox" value="Myosp" checked> Myosp </label> </li>
                <li> <label> <input type="checkbox" value="Pip35" checked> Pip35 </label> </li> 
                <li> <label> <input type="checkbox" value="Pip50" checked> Pip50 </label> </li> 
                <li> <label> <input type="checkbox" value="Plesp" checked> Plesp </label> </li> 
                <li> <label> <input type="checkbox" value="Rhisp" checked> Rhisp </label> </li> 
            </ul> 
        </div> 

 

    <table id="myTable">
        <thead>
            <tr>
                <th>Species</th>
                <th>Time</th>
                <th>Probabilities</th>
            </tr>
        </thead>
        <tbody></tbody>
    </table>
      

   


    

    <script>
        var userName = "{{username}}";
    </script>

    <script src="{{ url_for('static', filename='js/src/main.js') }}" type="module"></script>
    




</body>
</html>
