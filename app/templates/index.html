<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WAV File Processor</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>



    <!-- Add your CSS and JavaScript references here -->
    <!--script src="https://unpkg.com/wavesurfer.js@7.7.2/dist/wavesurfer.min.js"></script-->
    <!--script src="https://unpkg.com/wavesurfer.js@7.7.2/dist/plugins/regions.min.js"></script-->
    <!--script src="https://unpkg.com/wavesurfer.js@7.7.2/dist/plugins/zoom.min.js"></script-->
    <!--script src="https://unpkg.com/wavesurfer.js@7.7.2/dist/plugins/spectrogram.min.js"></script-->

    <script src="{{ url_for('static', filename='js/lib/jquery-2.2.3.min.js') }}" type="text/javascript"></script>
    <script src="{{ url_for('static', filename='js/lib/wavesurfer.min.js') }}" type="text/javascript"></script>
    <script src="{{ url_for('static', filename='js/lib/wavesurfer.spectrogram.min.js') }}" type="text/javascript"></script>
    <script src="{{ url_for('static', filename='js/lib/wavesurfer.regions.js') }}" type="text/javascript"></script>
    <script src="{{ url_for('static', filename='js/lib/wavesurfer.timeline.min.js') }}" type="text/javascript"></script>
    <!--script src="{{ url_for('static', filename='js/lib/wavesurfer.labels.js') }}" type="text/javascript"></script-->
    

</head>
<body>

    <!-- Button to trigger the pop-up window -->
    <button type="button"  onclick="openPopUpWindow()">
        See all species
    </button>

    <!-- JavaScript function to open the pop-up window -->
    <script>
        function openPopUpWindow() {
            // Specify the URL of the page you want to load in the pop-up window
            var popUpUrl = "{{ url_for('species') }}";

            // Specify the properties of the pop-up window
            var popUpProperties = "width=800,height=600,scrollbars=yes,resizable=yes";

            // Open the pop-up window
            window.open(popUpUrl, "Pop-up Window", popUpProperties);
        }
    </script>

    

    <!--a href="{{url_for('species')}}">See all species</a-->
    <a href="{{url_for('login')}}">Login Page</a>
    <a href="{{url_for('register')}}">Register Page</a>
    {% if session['is_logged_in'] %}
        <!-- Show the button only if the user is logged in -->
        <a href="{{url_for('dashboard')}}">Logout Page</a>
    {% endif %}
    <a href="{{url_for('split')}}">Split Audio</a>

    <br>
    

    <input type="file" id="audioFile" accept=".wav">
    <button id="visualizeButton">Visualize Audio</button>
    <!--button id="processButton">Process Audio</button-->
    <div class="btn-group">
        <button type="button" id="startAI" class="btn btn-primary dropdown-toggle" data-bs-toggle="dropdown">Process Audio</button>
        <div class="dropdown-menu">
            <button id="processButton">AI Bats</button>
            <button id="processButton2">AI Birds</button>
        </div>
    </div>

    <button id="playButton">Play</button>
    <button id="pauseButton">Pause</button>

    <button id="prec">Prec</button>
    <button id="next">Next</button>


    <label id="slider-container">
        Iteration: <input type="range" id="slider" min="1" max="300" value="1" />
    </label>

    <label>
        Max Freq: <input type="range" id="maxFreq" min="1000" max="96000" value="96000" />
    </label>

    <div class="btn-group">
        <button type="button" class="btn btn-primary dropdown-toggle" data-bs-toggle="dropdown">Labels</button>
        <div class="dropdown-menu">
            <button class="dropdown-item" id="loadLabels" disabled>Load Local</button>
            <button class="dropdown-item" id="save" disabled>Save Local</button>
            <button class="dropdown-item" id="uploadButton">Save Upload</button>
            <!--button class="dropdown-item" id="discussButton" {% if not isExpert %}style="display: none;"{% endif %}>Discussed</button-->
            <button class="dropdown-item" id="validateButton" {% if not isExpert %}style="display: none;"{% endif %}>Validated</button>
        </div>
    </div>
    



    <div class="container mt-3">
        <!--h3>Modal Example</h3>
        <p>Click on the button to open the modal.</p-->
        
        <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#myModal">
            All audios
        </button>
      </div>

    <!-- The Modal -->
    <div class="modal" id="myModal">
        <div class="modal-dialog">
        <div class="modal-content">
    
            <!-- Modal Header >
            <div class="modal-header">
            <h4 class="modal-title">Modal Heading</h4>
            <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div-->
    
            <!-- Modal body -->
            <div class="modal-body">
                You must be logged in to see all the files.
                Waiting files to be validated
                <!--h3>Uploaded Files</h3-->
                
                <ul>
                    {% for filename in files %}
                        <li>
                            <a href="#" onclick="changeAudio('{{ filename }}')">{{ filename }}</a>
                            <div id="buttons-container-{{ filename }}"></div>
                        </li>
                        
                    {% endfor %}
                </ul>
                <div id="waveform-container"></div>
            
                </div>
        
                <!-- Modal footer -->
                <div class="modal-footer">
                <button type="button" class="btn btn-danger" data-bs-dismiss="modal">Close</button>
            </div>
    
        </div>
        </div>
    </div>
    
    <div id="waveform"></div>


    
    <div id="result"></div>
    <div id="start"></div>
    <div id="end"></div>
    <div id="probability"></div>
    <div id="spectrogram"></div>

    <!--table id="myTable">
        <thead>
            <tr>
                <th>Species</th>
                <th>Time</th>
                <th>Probabilities</th>
            </tr>
        </thead>
        <tbody></tbody>
    </table-->
      



    <form role="form" id="myForm" style="display: none;" name="edit" style="opacity: 0; transition: opacity 300ms linear; margin: 30px 0;">
        
        <div>
            <select class="custom-select" id="choiceSelector" name="choiceSelector" style="height: 30px;width: 100%">
                <option value="Barbarg">Barbarg</option>
                <option value="Envsp">Envsp</option>
                <option value="Myosp">Myosp</option>
                <option value="Pip35">Pip35</option>
                <option value="Pip50">Pip50</option>
                <option value="Plesp">Plesp</option>
                <option value="Rhisp">Rhisp</option>
                <option value="other" id="customOption">Type your own...</option>
            </select>
        </div>

        <div class="form-group">
            <label for="note">Note</label>
            <textarea id="note" class="form-control" rows="3" name="note"></textarea>
        </div>
        

        <div>
            <button type="submit" class="btn btn-success btn-block">Save</button>
            <button type="button" class="btn btn-secondary btn-block" id="closeForm">Close</button>
        </div>
        
    </form>

    <script>
        var userName = "{{ username }}";
        var isLoggedIn = "{{ session['is_logged_in'] }}"
        var isExpert = "{{ isExpert }}"
    </script>

    <script src="{{ url_for('static', filename='js/src/main.js') }}" type="module"></script>




</body>
</html>
